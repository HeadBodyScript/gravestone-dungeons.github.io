tag @s add FALSE
execute at @e[type=minecraft:armor_stand,limit=1,sort=nearest,tag=armor_stand.boss,tag=grimgar] at @a[distance=..64] run summon armor_stand ~ ~1 ~ {Invisible:1b,ShowArms:0b,Marker:1b,NoBasePlate:1b,Small:1b,Tags:["experience_major_enemy"]}

execute as @e[type=minecraft:armor_stand,limit=1,sort=nearest,tag=armor_stand.boss,tag=grimgar] run kill @s
execute as @e[type=minecraft:evoker,limit=1,sort=nearest,tag=boss.grimgar] run kill @s
scoreboard players reset @s bossTick
scoreboard players reset @s tick
bossbar set minecraft:boss.grimgar players

summon item ~ ~1 ~ {Item:{id:skeleton_skull,count:1,components:{custom_name:'[{"text":"Grimgars Necromacer Mask","italic":true,"color":"#006969"}]',lore:['[{"color":"gray","italic":false,"text":"Irrefutable proof, that Grimgar"}]','[{"color":"gray","italic":false,"text":"has been vanquished."}]'],custom_model_data:1,custom_data:{boss_lvl_2:1b},enchantments:{levels:{binding_curse:1}},attribute_modifiers:{modifiers:[{type:"generic.armor",amount:10,slot:head,operation:add_value,id:"520c93ff-747a-438f-b6d9-b9bb75727381"}]},enchantment_glint_override:false,max_stack_size:1}},Motion:[0.0,0.3,0.0]}

summon minecraft:item ~ ~1 ~ {Item:{id:"minecraft:barrel",components:{custom_name:'[{"text":"Grimgars Alchemical Pouch","italic":true,"color":"#006969"}]',container_loot:{loot_table:'gd:chests/grimgar'}}},Motion:[0.0,0.3,0.0]}

execute at @e[type=armor_stand,tag=armor_stand.guillaume] run summon villager ~ ~ ~ {VillagerData:{type:plains,profession:librarian,level:2},Offers:{Recipes:[{xp:0,maxUses:16,buy:{id:enchanted_book,count:1},sell:{id:iron_nugget,count:3,components:{max_stack_size:96,custom_name:'[{"text":"Silver Coin","italic":true,"color":"#eeeeee"}]',custom_data:{silver_coin:1b},custom_model_data:1}}},{xp:0,maxUses:16,buy:{id:candle,count:8},sell:{id:iron_nugget,count:1,components:{max_stack_size:96,custom_name:'[{"text":"Silver Coin","italic":true,"color":"#eeeeee"}]',custom_data:{silver_coin:1b},custom_model_data:1}}},{xp:0,maxUses:16,buy:{id:honey_bottle,count:8},sell:{id:iron_nugget,count:1,components:{max_stack_size:96,custom_name:'[{"text":"Silver Coin","italic":true,"color":"#eeeeee"}]',custom_data:{silver_coin:1b},custom_model_data:1}}},{xp:0,maxUses:16,buy:{id:book,count:12},sell:{id:iron_nugget,count:1,components:{max_stack_size:96,custom_name:'[{"text":"Silver Coin","italic":true,"color":"#eeeeee"}]',custom_data:{silver_coin:1b},custom_model_data:1}}},{xp:0,maxUses:1,buy:{id:iron_nugget,count:1,components:{max_stack_size:96,custom_name:'[{"text":"Silver Coin","italic":true,"color":"#eeeeee"}]',custom_data:{silver_coin:1b},custom_model_data:1}},sell:{id:clock,count:1,components:{max_stack_size:1,custom_name:'{"text":"Weathered Trade Fair Clock","italic":true,"color":"dark_purple"}',lore:['[{"text":"Tells you when the traders restock.","italic":false,"color":"gray"}]','[{"text":"So that you don\'t miss it, you","italic":false,"color":"gray"}]','[{"text":"should be there before they do!","italic":false,"color":"gray"}]'],custom_data:{fair_clock:1b},attribute_modifiers:[{id:luck,type:"generic.luck",amount:1,operation:add_value,slot:mainhand}]}}},{xp:0,maxUses:1,buy:{id:gold_nugget,count:2,components:{max_stack_size:96,custom_name:'[{"text":"Gold Coin","italic":true,"color":"#ffcc33"}]',custom_data:{gold_coin:1b},custom_model_data:1}},sell:{id:sentry_armor_trim_smithing_template,count:1,components:{max_stack_size:1,custom_name:'{"color":"#339900","italic":true,"text":"Stone Rune of Lesser Fall Damage"}',lore:['{"color":"gray","italic":false,"text":"Unlocking +1 Save Fall Distance"}'],hide_additional_tooltip:{},custom_model_data:3,custom_data:{falldistance1:1b},food:{nutrition:0,saturation:0,can_always_eat:true,eat_seconds:100010}}}},{xp:0,maxUses:1,buy:{id:gold_nugget,count:2,components:{max_stack_size:96,custom_name:'[{"text":"Gold Coin","italic":true,"color":"#ffcc33"}]',custom_data:{gold_coin:1b},custom_model_data:1}},sell:{id:sentry_armor_trim_smithing_template,count:1,components:{max_stack_size:1,custom_name:'{"color":"#66ccff","italic":true,"text":"Stone Rune of Longer Breath"}',lore:['{"color":"gray","italic":false,"text":"Unlocking +20% Longer Breath"}'],hide_additional_tooltip:{},custom_model_data:5,custom_data:{oxygen1:1b},food:{nutrition:0,saturation:0,can_always_eat:true,eat_seconds:100010}}}},{xp:0,maxUses:1,buy:{id:gold_nugget,count:2,components:{max_stack_size:96,custom_name:'[{"text":"Gold Coin","italic":true,"color":"#ffcc33"}]',custom_data:{gold_coin:1b},custom_model_data:1}},sell:{id:sentry_armor_trim_smithing_template,count:1,components:{max_stack_size:1,custom_name:'{"color":"#9933ff","italic":true,"text":"Stone Rune of Higher Range"}',lore:['{"color":"gray","italic":false,"text":"Unlocking +1 Range"}'],hide_additional_tooltip:{},custom_model_data:4,custom_data:{range1:1b},food:{nutrition:0,saturation:0,can_always_eat:true,eat_seconds:100010}}}},{xp:0,maxUses:1,buy:{id:iron_nugget,count:24,components:{max_stack_size:96,custom_name:'[{"text":"Silver Coin","italic":true,"color":"#eeeeee"}]',custom_data:{silver_coin:1b},custom_model_data:1}},sell:{id:globe_banner_pattern,count:1}},{xp:0,maxUses:1,buy:{id:iron_nugget,count:24,components:{max_stack_size:96,custom_name:'[{"text":"Silver Coin","italic":true,"color":"#eeeeee"}]',custom_data:{silver_coin:1b},custom_model_data:1}},sell:{id:flower_banner_pattern,count:1}},{xp:0,maxUses:1,buy:{id:iron_nugget,count:24,components:{max_stack_size:96,custom_name:'[{"text":"Silver Coin","italic":true,"color":"#eeeeee"}]',custom_data:{silver_coin:1b},custom_model_data:1}},sell:{id:skull_banner_pattern,count:1}},{xp:0,maxUses:1,buy:{id:iron_nugget,count:24,components:{max_stack_size:96,custom_name:'[{"text":"Silver Coin","italic":true,"color":"#eeeeee"}]',custom_data:{silver_coin:1b},custom_model_data:1}},sell:{id:creeper_banner_pattern,count:1}},{xp:0,maxUses:3,buy:{id:gold_nugget,count:1,components:{max_stack_size:96,custom_name:'[{"text":"Gold Coin","italic":true,"color":"#ffcc33"}]',custom_data:{gold_coin:1b},custom_model_data:1}},buyB:{id:iron_nugget,count:54,components:{max_stack_size:96,custom_name:'[{"text":"Silver Coin","italic":true,"color":"#eeeeee"}]',custom_data:{silver_coin:1b},custom_model_data:1}},sell:{id:potion,count:1,components:{custom_name:'{"color":"#BF0000","italic":true,"text":"Potion of Vigorous Bull Strength"}',lore:['{"color":"gray","italic":false,"text":"Burns like fire, but providing"}','{"color":"gray","italic":false,"text":"a lot of strength and resistance."}'],custom_model_data:4,potion_contents:{custom_color:12517376,custom_effects:[{id:"minecraft:strength",amplifier:4,duration:3600,show_particles:0b,show_icon:1b,ambient:0b},{id:"minecraft:resistance",amplifier:3,duration:3600,show_particles:0b,show_icon:1b,ambient:0b},{id:"minecraft:absorption",amplifier:2,duration:2400,show_particles:0b,show_icon:1b,ambient:0b}]}}}},{xp:0,maxUses:3,buy:{id:gold_nugget,count:1,components:{max_stack_size:96,custom_name:'[{"text":"Gold Coin","italic":true,"color":"#ffcc33"}]',custom_data:{gold_coin:1b},custom_model_data:1}},buyB:{id:iron_nugget,count:54,components:{max_stack_size:96,custom_name:'[{"text":"Silver Coin","italic":true,"color":"#eeeeee"}]',custom_data:{silver_coin:1b},custom_model_data:1}},sell:{id:potion,count:1,components:{custom_name:'{"color":"#99FF33","italic":true,"text":"Potion of Vigorous Luck"}',lore:['{"color":"gray","italic":false,"text":"Lifts up the adventurer\'s mood."}','{"color":"gray","italic":false,"text":"Better loot can be found in chests"}','{"color":"gray","italic":false,"text":"and barrels."}'],custom_model_data:4,potion_contents:{custom_color:10092339,custom_effects:[{id:"minecraft:luck",amplifier:6,duration:12000,show_particles:0b,show_icon:1b,ambient:0b}]}}}},{xp:0,maxUses:1,buy:{id:gold_nugget,count:8,components:{max_stack_size:96,custom_name:'[{"text":"Gold Coin","italic":true,"color":"#ffcc33"}]',custom_data:{gold_coin:1b},custom_model_data:1}},sell:{id:enchanted_book,count:1,components:{max_stack_size:3,custom_name:'{"color":"#9900cc","italic":true,"text":"Arcane Grimoire"}',lore:["[\"\"]",'[{"text":"Encrusted with the knowledge of","italic":false,"color":"gray"}]','[{"text":"ancient sorcery, these tomes once","italic":false,"color":"gray"}]','[{"text":"guided powerful wizards in","italic":false,"color":"gray"}]','[{"text":"bending magic to their will.","italic":false,"color":"gray"}]','[{"text":"Within their worn pages lies the","italic":false,"color":"gray"}]','[{"text":"power to control the arcane.","italic":false,"color":"gray"}]'],custom_model_data:11,custom_data:{elder_tome:1b},stored_enchantments:{levels:{"minecraft:efficiency":6}}}}}]},CustomName:'[{"text":"Monk Guillaume","color":"#6666ff"}]',Health:90,PersistenceRequired:1b,Tags:["villager","guillaume"],attributes:[{id:"generic.max_health",base:90f},{id:"generic.movement_speed",base:0f}],Team:"DIREWOOD"}

execute at @e[type=armor_stand,tag=armor_stand.monk] run summon villager ~ ~ ~ {PersistenceRequired:1b,Health:30f,CustomName:'{"color":"#996600","text":"Humble Monk"}',attributes:[{id:"minecraft:generic.max_health",base:30},{id:"minecraft:generic.movement_speed",base:0.4}],VillagerData:{level:2,profession:"minecraft:librarian",type:"minecraft:plains"},Team:"DIREWOOD"}
execute at @e[type=armor_stand,tag=armor_stand.monk] run summon villager ~ ~ ~ {PersistenceRequired:1b,Health:30f,CustomName:'{"color":"#996600","text":"Humble Monk"}',attributes:[{id:"minecraft:generic.max_health",base:30},{id:"minecraft:generic.movement_speed",base:0.4}],VillagerData:{level:2,profession:"minecraft:librarian",type:"minecraft:plains"},Team:"DIREWOOD"}

# execute at @s as @e[type=minecraft:armor_stand,tag=armor_stand.monk,distance=..128] at @s run kill @s
# execute at @s as @e[type=minecraft:armor_stand,tag=armor_stand.guillaume,distance=..128] at @s run kill @s

function gd_boss:grimgar/reset

scoreboard players set @a[distance=..64] bardquestcounter 1

execute at @s as @e[type=minecraft:marker,tag=marker.boss,distance=..32,limit=1,sort=nearest] at @s run kill @s
# execute at @s as @e[type=minecraft:marker,tag=marker.minion,distance=..32,limit=8,sort=nearest] at @s run kill @s
# execute at @s as @e[type=minecraft:marker,tag=marker.barrier,distance=..32,limit=1,sort=nearest] at @s run kill @s

